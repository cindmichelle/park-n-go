{"version":3,"sources":["./src/app/pages/manage-place/edit-place/edit-place.page.html","./src/app/pages/manage-place/edit-place/edit-place.module.ts","./src/app/pages/manage-place/edit-place/edit-place.page.scss","./src/app/pages/manage-place/edit-place/edit-place.page.ts"],"names":[],"mappings":"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","file":"pages-manage-place-edit-place-edit-place-module-es5.js","sourcesContent":["module.exports = \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-title>Add Place</ion-title>\\r\\n    <ion-buttons slot=\\\"end\\\">\\r\\n      <ion-button slot=\\\"icon-only\\\" (click)=\\\"backToManage()\\\">\\r\\n        <ion-icon name=\\\"close\\\" class=\\\"close-btn\\\"></ion-icon>\\r\\n      </ion-button>\\r\\n    </ion-buttons>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content class=\\\"ion-padding\\\">\\r\\n  <form #editPlace=\\\"ngForm\\\" (ngSubmit)=\\\"editPlaceInDB()\\\">\\r\\n    <ion-list padding lines=\\\"full\\\" class=\\\"ion-padding\\\">\\r\\n      <ion-item class=\\\"input-container\\\">\\r\\n        <ion-label position=\\\"stacked\\\">Area Name</ion-label>\\r\\n        <ion-input\\r\\n                class=\\\"input\\\"\\r\\n                required\\r\\n                inputmode=\\\"text\\\"\\r\\n                oninput=\\\"handleFirstNameValue(event)\\\"\\r\\n                name=\\\"areaName\\\"\\r\\n                [(ngModel)]=\\\"areaName\\\"\\r\\n        ></ion-input>\\r\\n      </ion-item>\\r\\n\\r\\n      <ion-item>\\r\\n        <ion-label position=\\\"stacked\\\">Address</ion-label>\\r\\n        <ion-textarea required class=\\\"input\\\" name=\\\"address\\\" [(ngModel)]=\\\"address\\\"></ion-textarea>\\r\\n\\r\\n      </ion-item>\\r\\n\\r\\n      <ion-item class=\\\"input-container\\\">\\r\\n        <ion-label position=\\\"stacked\\\">Price per hour</ion-label>\\r\\n        <ion-input\\r\\n                class=\\\"input\\\"\\r\\n                required\\r\\n                inputmode=\\\"numeric\\\"\\r\\n                oninput=\\\"handleFirstNameValue(event)\\\"\\r\\n                name=\\\"pricePerHour\\\"\\r\\n                [(ngModel)]=\\\"pricePerHour\\\"\\r\\n        ></ion-input>\\r\\n      </ion-item>\\r\\n\\r\\n      <ion-item class=\\\"input-container\\\">\\r\\n        <ion-label position=\\\"stacked\\\">Location ***put map here***</ion-label>\\r\\n        <ion-input\\r\\n                class=\\\"input\\\"\\r\\n                required\\r\\n                inputmode=\\\"numeric\\\"\\r\\n                oninput=\\\"handleFirstNameValue(event)\\\"\\r\\n        ></ion-input>\\r\\n      </ion-item>\\r\\n      <ion-item class=\\\"input-container\\\">\\r\\n        <ion-label position=\\\"stacked\\\"\\r\\n        >Upload Picture **need more info**</ion-label\\r\\n        >\\r\\n        <ion-input\\r\\n                class=\\\"input\\\"\\r\\n                required\\r\\n                inputmode=\\\"numeric\\\"\\r\\n                oninput=\\\"handleFirstNameValue(event)\\\"\\r\\n        ></ion-input>\\r\\n      </ion-item>\\r\\n    </ion-list>\\r\\n<!--    <ion-button expand=\\\"block\\\" color=\\\"tertiary\\\" type=\\\"submit\\\" class=\\\"upload-btn\\\"-->\\r\\n<!--    >Upload from Gallery</ion-button-->\\r\\n<!--    >-->\\r\\n    <ion-button expand=\\\"block\\\" (click)=\\\"editPlaceLatLng()\\\" color=\\\"tertiary\\\">Update Location</ion-button>\\r\\n    <ion-button\\r\\n            expand=\\\"block\\\"\\r\\n            type=\\\"submit\\\"\\r\\n            class=\\\"add-btn\\\"\\r\\n            [routerLink]=\\\"['/', 'tabs', 'parking']\\\"\\r\\n    >Edit Place</ion-button\\r\\n    >\\r\\n    <ion-button expand=\\\"block\\\" color=\\\"danger add-btn\\\" (click)=\\\"deletePlaceFromDB()\\\">Delete Vehicle</ion-button>\\r\\n  </form>\\r\\n</ion-content>\\r\\n\"","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { EditPlacePage } from './edit-place.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: EditPlacePage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [EditPlacePage]\r\n})\r\nexport class EditPlacePageModule {}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL21hbmFnZS1wbGFjZS9lZGl0LXBsYWNlL2VkaXQtcGxhY2UucGFnZS5zY3NzIn0= */\"","import { ManagePlaceService } from './../../../services/manage-place.service';\r\nimport { Place } from './../../../model/place.model';\r\nimport { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { LoadingController, ModalController, NavController } from '@ionic/angular';\r\nimport { AngularFirestore } from '@angular/fire/firestore';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { NgForm } from '@angular/forms';\r\nimport { AsyncStorageService } from '../../../native/async-storage.service';\r\nimport { PickLocationComponent } from '../../../components/pick-location/pick-location.component';\r\n\r\n@Component({\r\n  selector: 'app-edit-place',\r\n  templateUrl: './edit-place.page.html',\r\n  styleUrls: ['./edit-place.page.scss'],\r\n})\r\nexport class EditPlacePage implements OnInit {\r\n\r\n  @ViewChild('editPlace', { static: true }) form!: NgForm;\r\n  private placeId!: string;\r\n\r\n  place: Place = {\r\n    areaName: '',\r\n    address: '',\r\n    email: '',\r\n    pricePerHour: 0,\r\n    locLatitude: 0,\r\n    locLongitude: 0,\r\n  };\r\n  locLat!: number;\r\n  locLng!: number;\r\n\r\n  constructor(\r\n    private navCtrl: NavController,\r\n    private loadCtrl: LoadingController,\r\n    private activatedRoute: ActivatedRoute,\r\n    private storage: AsyncStorageService,\r\n    private firestore: AngularFirestore,\r\n    private placeService: ManagePlaceService,\r\n    private modalCtrl: ModalController\r\n  ) {\r\n  }\r\n\r\n  async ngOnInit() {\r\n    this.activatedRoute.paramMap.subscribe(paramMap => {\r\n      if (!paramMap.has('id')) {\r\n        this.backToManage();\r\n      }\r\n\r\n      this.placeId = paramMap.get('id') + '';\r\n      console.log(this.placeId);\r\n\r\n      const data = this.firestore.doc<Place>('places/' + this.placeId);\r\n      const result = data.valueChanges();\r\n      result.subscribe(res => {\r\n        // @ts-ignore\r\n        this.areaName = res.areaName;\r\n        // @ts-ignore\r\n        this.address = res.address;\r\n        // @ts-ignore\r\n        this.pricePerHour = res.pricePerHour;\r\n      });\r\n    });\r\n  }\r\n\r\n  async editPlaceLatLng() {\r\n    const modal = await this.modalCtrl.create({\r\n      component: PickLocationComponent,\r\n      // componentProps: {lat: }\r\n    });\r\n\r\n    await modal.present();\r\n\r\n    await modal.dismiss((location: { lat: number; lng: number; }) => {\r\n      console.log(location.lat, location.lng);\r\n      this.locLat = location.lat;\r\n      this.locLng = location.lng;\r\n    }).then( () => {\r\n      // this.locLatLng = true;\r\n    });\r\n  }\r\n\r\n  async editPlaceInDB() {\r\n    const loading = await this.loadCtrl.create({\r\n      message: 'Editing your place...',\r\n    });\r\n    await loading.present();\r\n\r\n    const areaName = this.form.value.areaName;\r\n    const address = this.form.value.address;\r\n    const pricePerHour = this.form.value.pricePerHour;\r\n    const locLatitude = 0;\r\n    const locLongitude = 0;\r\n    const email = await this.storage.get('token');\r\n\r\n    console.log(areaName, address, pricePerHour, locLatitude, locLongitude, email);\r\n\r\n    this.place = {\r\n      areaName,\r\n      address,\r\n      email,\r\n      pricePerHour,\r\n      locLatitude,\r\n      locLongitude,\r\n    };\r\n\r\n    console.log(this.place);\r\n\r\n    await this.placeService.updatePlace(this.place, this.placeId);\r\n\r\n    await loading.dismiss();\r\n    this.backToManage();\r\n  }\r\n\r\n  async deletePlaceFromDB() {\r\n    const loading = await this.loadCtrl.create({\r\n      message: 'Editing your place...',\r\n    });\r\n    await loading.present();\r\n\r\n    await this.placeService.removePlace(this.placeId);\r\n\r\n    await loading.dismiss();\r\n    this.backToManage();\r\n  }\r\n\r\n  backToManage() {\r\n    this.navCtrl.navigateBack('account/manage-place');\r\n  }\r\n\r\n}\r\n"],"sourceRoot":""}